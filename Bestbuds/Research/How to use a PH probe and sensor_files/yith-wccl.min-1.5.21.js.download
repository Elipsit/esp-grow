jQuery(document).ready(function(u){"use strict";if("undefined"==typeof yith_wccl_general)return!1;var t=[],a="";u.fn.yith_wccl_select=function(t,s){var o=u(this),a=t[decodeURIComponent(o.attr("name"))],r=void 0!==a?a.type:o.data("type"),l=void 0!==a&&a.terms,d=o.parent().find(".select_box"),_=[];o.addClass("yith_wccl_custom").hide(),o.closest(".select-wrapper").addClass("yith_wccl_is_custom"),d.length&&yith_wccl_general.grey_out||(d.remove(),d=u("<div />",{class:"select_box_"+r+" select_box "+o.attr("name")}).insertAfter(o)),o.find("option").each(function(){var t=u(this).val();if(l&&void 0!==l[t]||u(this).data("value")){_.push(t);var a="select_option_"+r+" select_option",e=l&&void 0!==l[t]?l[t].value:u(this).data("value"),i=l&&void 0!==l[t]?l[t].tooltip:u(this).data("tooltip"),c=u(this),n=d.find('[data-value="'+t+'"]');n.length||(t==o.val()&&(a+=" selected"),(n=u("<div/>",{class:a,"data-value":t}).appendTo(d)).on("click",function(t){if(u(this).hasClass("inactive")){var a=o.data("attribute_name")||o.attr("name");g(s,u(this).data("value"),a)?o.val("").change():h(s,!1,[])}u(this).hasClass("selected")?o.val("").change():o.val(c.val()).change(),v(u(this))}),"colorpicker"==r?1==(e=e.split(",")).length?n.append(u("<span/>",{class:"yith_wccl_value",css:{background:e}})):(n.append(u('<span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span>')),n.find(".yith-wccl-bicolor").css({"border-bottom-color":e[0],"border-left-color":e[1]})):"image"==r?n.append(u("<img/>",{class:"yith_wccl_value",src:e})):"label"==r&&n.append(u("<span/>",{class:"yith_wccl_value",text:e})),yith_wccl_general.tooltip&&void 0!==i&&""!=i&&("image"==r&&-1!=i.indexOf("{show_image}")&&(i=i.replace("{show_image}",'<img src="'+e+'" />')),p(n,i)))}}),d.children().each(function(){var t=u(this).data("value")+"";"-1"==u.inArray(t,_)?u(this).addClass("inactive"):u(this).removeClass("inactive")})};var g=function(t,a,e){var i=!1,c=t.data("product_variations"),n=t.find(".variations select"),s=[];u.each(n,function(){var t=u(this).data("attribute_name")||u(this).attr("name");s[t]=e==t?a:u(this).val()});for(var o=0;o<c.length;o++){var r=c[o];if(i)break;for(var l in(i=r).attributes)if(r.attributes.hasOwnProperty(l)){var d=r.attributes[l];d!=s[l]&&""!=d&&(i=!1)}}return i},h=function(t,a,e){var i=t.find(".variations select");1==i.length&&a?t.trigger("woocommerce_update_variation_values"):i.val(""),i.change(),a||(t.find("div.select_option").removeClass("selected inactive"),t.trigger("reset_data"))},p=function(t,a){var e=u('<span class="yith_wccl_tooltip"></span>'),i=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;e.addClass(i),t.append(e.html("<span>"+a+"</span>"))},v=function(t){t.toggleClass("selected"),t.siblings().removeClass("selected")},w=function(t){t.preventDefault();var a=u(this),e=a.data("product_id"),i=a.data("quantity"),c=[],n=!1;t.data.select.each(function(t){c[t]=this.name+"="+this.value});try{n="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc")}catch(t){n=!1}u.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%","yith_wccl_add_to_cart"),type:"POST",data:{action:"yith_wccl_add_to_cart",product_id:e,variation_id:t.data.variation,attr:c.join("&"),quantity:i,context:"frontend"},beforeSend:function(){a.addClass("loading").removeClass("added")},success:function(t){t.error&&t.product_url?window.location=t.product_url:yith_wccl_general.cart_redirect?window.location=yith_wccl_general.cart_url:(a.removeClass("loading").addClass("added"),a.next(".added_to_cart").length||a.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),t.fragments&&u.each(t.fragments,function(t,a){u(t).replaceWith(a)}),n&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(t.fragments)),sessionStorage.setItem("wc_cart_hash",t.cart_hash)),u(document).trigger("wc_update_cart"),u(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]))}})};u.yith_wccl=function(f){a=u(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===(f="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):f)&&(f=[]),a.each(function(){var l=u(this),c=l.find(".variations select"),n=!1,s=!1,d=l.closest(yith_wccl_general.wrapper_container_shop).length?l.closest(yith_wccl_general.wrapper_container_shop):l.closest(".product-add-to-cart"),i=d.find("img.wp-post-image"),o=i.attr("src"),r=i.attr("srcset"),t=d.find("span.price").clone().wrap("<p>").parent().html(),_=d.find("a.product_type_variable"),a=_.html(),h=d.find("input.thumbnail-quantity"),e=function(t,o){var r=t.length;t.each(function(){var t=decodeURIComponent(this.name),a=f[t],e=void 0!==a,i=u(this).data("type"),c=l.hasClass("initialized");if(--r,c||(o?u(this).attr("data-default_value",u(this).val()):u(this).val(u(this).data("default_value"))),e||i)if(o){if(!l.hasClass("in_loop")&&!d.length&&yith_wccl_general.description&&a.descr){var n=!!u(this).closest("tr").length,s=n?'<tr><td colspan="2">'+a.descr+"</td></tr>":'<p class="attribute_description">'+a.descr+"</p>";n?u(this).closest("tr").after(s):u(this).parent().append(s)}}else(e&&a.terms||i)&&u(this).yith_wccl_select(f,l);r||c||l.addClass("initialized")})},p=function(){v(!1),d.find("span.price").replaceWith(t),d.find(".ywccl_stock").remove(),h&&h.length&&h.hide(),_.html(a).off("click",w).removeClass("added").next(".added_to_cart").remove()},v=function(t){if(t){var a=t.image_src,e=t.image_srcset;a&&a.length&&i.attr("src",a),e&&e.length&&i.attr("srcset",e)}else i.attr("src",o),i.attr("srcset",r)};l.on("check_variations",function(t,a,e){if(!e){if(n)return void(n=!1);s&&(s=!1,p())}}),l.on("woocommerce_update_variation_values",function(){e(c,!1)}),l.on("found_variation",function(t,a){if(c.last().trigger("focusin"),l.hasClass("in_loop")){s&&p(),s=n=!0;var e=a.price_html,i=a.variation_id;v(a),""!=e&&d.find("span.price").replaceWith(e),h&&h.length&&h.show(),a.is_in_stock&&(_.html(yith_wccl_general.add_cart),_.off("click").on("click",{variation:i,select:c},w)),d.find("span.price").after(u(a.availability_html).addClass("ywccl_stock")),u(document).trigger("ywccl_found_variation_in_loop",[a])}}),l.on("click",".reset_variations",function(){u(".select_option.selected").removeClass("selected")}),l.hasClass("in_loop")&&l.parent().on("change",function(t){t.stopPropagation()}),h&&h.length&&h.hide(),e(c,!0),1==c.length&&yith_wccl_general.image_hover&&l.find(".select_option").hover(function(){var t=u(this).attr("data-value"),a=c.attr("name"),e=g(l,t,a);u(this).hasClass("selected")||u(this).siblings().hasClass("selected")||e&&(l.hasClass("in_loop")?v(e):l.wc_variations_image_update(e))},function(){u(this).hasClass("selected")||u(this).siblings().hasClass("selected")||(l.hasClass("in_loop")?v(!1):l.wc_variations_image_update(!1))})})},u.yith_wccl(t),u(document).on("yith-wcan-ajax-filtered yith_infs_added_elem initialized.owl.carousel",function(){void 0!==u.yith_wccl&&void 0!==u.fn.wc_variation_form&&(u(document).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each(function(){u(this).wc_variation_form()}),u.yith_wccl(t))}),u("body").on("quick-view-displayed",function(){var t=u(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");t&&u.yith_wccl(t)})});